<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Distorsi√≥n RP ‚Äî Cat√°logo VIP (Tiers)</title>
<meta content="Cat√°logo VIP del servidor de roleplay Distorsi√≥n RP: Bronce, Plata y Diamante." name="description"/>
<style>
    
    :root{
      --bg:#0b0714;          /* fondo p√∫rpura muy oscuro */
      --bg2:#1a0e24;         /* degradado secundario */
      --text:#f4ecff;        /* texto muy claro con tinte lila */
      --muted:#c9bfe0;       /* texto suave */
      --card:#150b28;        /* tarjetas p√∫rpura profundas */
      --border:#2a1a44;      /* borde p√∫rpura tenue */
      --accent:#ff4d8d;      /* magenta inspirado en el logo */
      --accent2:#ff7a18;     /* naranja del logo */
      /* Colores de categor√≠as sintonizados al branding */
      --anomalia:#ffb86b;    /* √°mbar claro */
      --eternidad:#ff8a4b;   /* naranja vivo */
      --resonancia:#d69dfc;  /* violeta claro */
      --luminencia:#ff9d6e;  /* naranja coral */
      --chaos:#ff6b6b;       /* rojo suave */
      --paradox:#ffe58a;     /* dorado p√°lido */
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(120deg,var(--bg),var(--bg2));color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    a{color:inherit}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header.nav{position:sticky;top:0;z-index:10;backdrop-filter:blur(8px);background-color:#0b0f1acc;border-bottom:1px solid var(--border)}
    .brand{font-weight:900;letter-spacing:.6px}
    .brand .d1{color:#60a5fa}.brand .d2{color:#f472b6}
    nav a{display:inline-block;padding:10px 14px;border:1px solid transparent;border-radius:999px;text-decoration:none;font-size:14px;opacity:.9}
    nav a:hover{border-color:var(--border);background:#ffffff0f}
    .hero{margin-top:10px;border:1px solid var(--border);border-radius:20px;padding:28px;background:linear-gradient(90deg,#f472b610,#60a5fa10)}
    h1{margin:0 0 8px 0;font-size:clamp(24px,4vw,34px);line-height:1.2}
    .hero p{margin:0 0 14px 0;color:var(--muted)}
    .chips a{margin-right:8px;margin-bottom:8px;display:inline-block;padding:10px 14px;border:1px solid var(--border);border-radius:999px;text-decoration:none;font-size:14px}
    .chips a:hover{border-color:#ffffff44;background:#ffffff10}
    .category{scroll-margin-top:80px;margin-top:28px}
    .cat-header{display:flex;align-items:center;gap:12px;border:1px solid var(--border);border-radius:16px;padding:16px;background:#ffffff08}
    .dot{width:10px;height:10px;border-radius:999px;display:inline-block;flex:0 0 auto}
    .muted{color:var(--muted);font-size:14px;margin-top:4px}
    .grid{display:grid;gap:16px;margin-top:16px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
    .card{border:1px solid var(--border);border-radius:16px;background:var(--card);padding:16px;display:flex;flex-direction:column;min-height:220px;box-shadow:0 6px 20px #00000040}
    .card h3{margin:0 0 6px 0;font-size:18px}
    .badge{font-size:12px;border:1px solid var(--border);border-radius:8px;padding:4px 8px;background:#0b0f1a}
    .perks{margin:10px 0 0 0;padding:0;list-style:none}
    .perks li{display:flex;gap:8px;margin:8px 0;color:#d0d6e6;font-size:14px}
    .perk-dot{width:6px;height:6px;border-radius:999px;margin-top:6px;flex:0 0 auto}
    .card-footer{margin-top:auto;padding-top:10px;border-top:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
    .price{font-weight:900}
    .btn{display:inline-block;border:1px solid var(--border);background:#ffffff10;border-radius:12px;padding:8px 14px;text-decoration:none;font-weight:600;font-size:14px}
    .btn:hover{background:#ffffff18}
    footer{color:var(--muted);text-align:center;margin:40px 0 16px 0;font-size:14px}
    .small{font-size:12px;color:var(--muted);margin-top:12px}
    .logo{height:20px;opacity:.85}
    .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    @media (max-width:560px){.row{flex-direction:column;align-items:flex-start}}
  
    /* === GRID PARA AGRUPAR CATEGOR√çAS LADO A LADO === */
    .catalog-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap:20px;
      align-items: stretch;
    }
    /* Apariencia tipo 'card' para cada categor√≠a */
    .category.cardlike{
      border:1px solid var(--border);
      border-radius:16px;
      background:#ffffff08;
      padding:16px;
    }
    .category.cardlike .cat-header{
      border:none;
      background:transparent;
      padding:0 0 8px 0;
    }
    .category.cardlike .grid{
      margin-top:8px;
    }

    /* === BOT√ìN DISCORD === */
    .btn-discord{
      display:inline-flex;align-items:center;gap:10px;
      border:1px solid var(--border);
      background:linear-gradient(90deg,#5865F2, #8892ff);
      color:white;text-decoration:none;
      border-radius:14px;padding:12px 16px;
      font-weight:800;letter-spacing:.3px;
      box-shadow:0 8px 18px rgba(88,101,242,.35);
      transition:transform .05s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn-discord:hover{transform:translateY(-1px);filter:saturate(1.05);box-shadow:0 10px 22px rgba(88,101,242,.45)}
    .btn-discord svg{width:20px;height:20px;flex:0 0 auto}
    .cta-wrap{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}

    /* Fondo con ligero glow radial para resaltar el logo/brand */
    html,body{
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(255,122,24,.12), transparent 60%),
        radial-gradient(1000px 500px at 80% 0%, rgba(255,77,141,.10), transparent 60%),
        linear-gradient(120deg,var(--bg),var(--bg2));
      color:var(--text);
    }
    header.nav{
      background:linear-gradient(90deg, #0e0a18cc, #140b22cc);
      border-bottom:1px solid var(--border);
      box-shadow:0 6px 18px rgba(0,0,0,.35);
    }
    .brand .d1{color:var(--accent2);filter:drop-shadow(0 0 8px rgba(255,122,24,.25))}
    .brand .d2{color:var(--accent); filter:drop-shadow(0 0 8px rgba(255,77,141,.25))}
    .hero{
      background:linear-gradient(90deg, rgba(255,77,141,.12), rgba(255,122,24,.12));
      border-color:var(--border);
      box-shadow:0 10px 30px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.02);
    }
    nav a{
      border-color:transparent;
      background:rgba(255,255,255,.03);
    }
    nav a:hover{
      border-color:rgba(255,255,255,.18);
      background:rgba(255,255,255,.06);
    }
    .chips a{
      border-color:rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
    }
    .chips a:hover{
      border-color:rgba(255,255,255,.22);
      background:rgba(255,255,255,.08);
    }
    .cat-header{
      background:linear-gradient(90deg, rgba(255,122,24,.06), rgba(255,77,141,.06));
      border-color:var(--border);
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      border-color:var(--border);
    }
    .btn{
      background:linear-gradient(90deg, rgba(255,122,24,.25), rgba(255,77,141,.25));
      border:1px solid rgba(255,255,255,.12);
    }
    .btn:hover{
      background:linear-gradient(90deg, rgba(255,122,24,.35), rgba(255,77,141,.35));
    }
    .btn-discord{
      background:linear-gradient(90deg, #5865F2, #8892ff);
      box-shadow:0 8px 20px rgba(88,101,242,.35);
    }

/* === CARRITO === */
.cart-btn{
  display:inline-flex;align-items:center;gap:8px;
  border:1px solid var(--border);
  background:rgba(255,255,255,.06);
  color:var(--text);text-decoration:none;
  border-radius:14px;padding:8px 14px;font-weight:700;
  margin-left:8px;
}
.cart-btn:hover{background:rgba(255,255,255,.1)}
.cart-badge{
  display:inline-flex;align-items:center;justify-content:center;
  min-width:20px;height:20px;border-radius:999px;
  background:var(--accent);color:#fff;font-size:12px;font-weight:900;padding:0 6px;
}
.cart-drawer{
  position:fixed;top:0;right:-420px;width:380px;max-width:90vw;height:100%;
  background:rgba(21,11,40,.98);border-left:1px solid var(--border);
  box-shadow:-10px 0 30px rgba(0,0,0,.35);z-index:50;transition:right .25s ease;
  display:flex;flex-direction:column;
}
.cart-drawer.open{ right:0; }
.cart-header{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid var(--border);}
.cart-title{font-weight:900}
.cart-close{background:transparent;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:6px 10px;cursor:pointer}
.cart-body{padding:12px 16px;overflow:auto;flex:1}
.cart-item{display:flex;align-items:flex-start;gap:10px;border:1px solid var(--border);border-radius:12px;padding:10px;margin-bottom:10px;background:rgba(255,255,255,.03)}
.cart-item h4{margin:0;font-size:14px}
.cart-item .meta{font-size:12px;color:var(--muted)}
.cart-footer{border-top:1px solid var(--border);padding:12px 16px}
.cart-total{display:flex;align-items:center;justify-content:space-between;font-weight:900}
.btn-primary{
  display:inline-block;border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(90deg, rgba(255,122,24,.35), rgba(255,77,141,.35));
  color:var(--text);text-decoration:none;border-radius:12px;padding:10px 14px;font-weight:800;margin-top:10px;width:100%;text-align:center
}
.btn-primary:hover{filter:saturate(1.05)}

    /* Negrita para categor√≠as del men√∫ superior */
    header.nav nav a { font-weight: 900 !important; }
    </style>
</head>
<body>
<header class="nav">
<div class="container row">
<div class="brand"><span class="d1">Distorsi√≥n</span> <span class="d2">RP</span></div>
<nav><a href="#catalog">üíé VIPS</a><a href="#autos-vips">üöó AUTOS VIPS</a><a href="#armas">üî´ PACK ARMAS</a><a href="#casas">üè† CASAS</a></nav>
<a aria-label="Abrir carrito" class="cart-btn" href="#" id="open-cart"><svg aria-hidden="true" fill="currentColor" height="18" viewbox="0 0 24 24" width="18"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2Zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2ZM7.16 14h9.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.67-.11-1.48-.88-1.48H6.21L5.27 2H2v2h2l3.6 7.59L5.25 14c-.41.73.12 1.63.91 1.63h12.84v-2H7.16Z"></path></svg><span class="cart-badge" id="cart-count">0</span></a><a class="btn-discord" href="https://discord.gg/dyCe37jU" rel="noopener" target="_blank"><svg aria-hidden="true" fill="currentColor" focusable="false" viewbox="0 0 24 24">
<path d="M20.317 4.369a19.79 19.79 0 0 0-4.885-1.515.074.074 0 0 0-.078.037c-.21.375-.444.864-.608 1.249a18.27 18.27 0 0 0-5.559 0 12.3 12.3 0 0 0-.617-1.249.077.077 0 0 0-.078-.037c-1.69.318-3.32.857-4.885 1.515a.07.07 0 0 0-.032.027C1.61 9.093.602 13.58 1.112 18.005a.082.082 0 0 0 .031.056 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.027c.461-.63.873-1.295 1.226-1.994a.077.077 0 0 0-.041-.106 13.1 13.1 0 0 1-1.87-.9.078.078 0 0 1-.008-.129c.126-.094.252-.192.372-.291a.074.074 0 0 1 .078-.01c3.927 1.808 8.18 1.808 12.062 0a.074.074 0 0 1 .078.009c.12.099.246.198.372.291a.078.078 0 0 1-.006.129 12.7 12.7 0 0 1-1.871.899.078.078 0 0 0-.04.107c.36.698.773 1.363 1.227 1.993a.078.078 0 0 0 .084.028 19.86 19.86 0 0 0 5.992-3.03.078.078 0 0 0 .032-.055c.5-4.5-.838-8.955-2.917-13.609a.067.067 0 0 0-.032-.028ZM8.68 15.313c-1.183 0-2.158-1.077-2.158-2.404 0-1.326.954-2.403 2.158-2.403 1.213 0 2.178 1.087 2.158 2.404 0 1.327-.954 2.403-2.158 2.403Zm6.662 0c-1.184 0-2.158-1.077-2.158-2.404 0-1.326.964-2.403 2.158-2.403s2.158 1.087 2.158 2.404c0 1.327-.963 2.403-2.158 2.403Z"></path></svg> √önete a nuestro Discord</a></div>
</header>
<main class="container">
<section class="hero">
<h1>Cat√°logo VIP ‚Äî Distorsi√≥n RP</h1>
<p>Elige tu categor√≠a y desbloquea beneficios exclusivos dentro del servidor. El cat√°logo aparece de inmediato.</p>
<div class="chips"><a href="#anomalia">üíé Anomal√≠a</a><a href="#eternidad">üí† Eternidad</a><a href="#resonancia">üí† Resonancia</a><a href="#luminencia">üîπ Luminencia</a><a href="#chaos">üí∑ Chaos</a><a href="#paradox">üëë Paradox</a></div><div class="cta-wrap"></div>
<p class="small">Sugerencia: conecta el bot√≥n ‚ÄúComprar‚Äù con tu tienda (Tebex/Ko‚Äëfi/Flow/PayPal) o canal de verificaci√≥n de Discord.</p>
</section>
<div class="catalog-grid" id="catalog"></div>
<p class="small">*Los beneficios son cosm√©ticos o de calidad de vida y respetan las reglas de equilibrio del servidor. Sujetos a cambios sin previo aviso.</p>
</main>
<footer>
    ¬© <span id="year"></span> Distorsi√≥n RP ‚Äî Hecho con ‚ô• por el staff. <a href="#top" style="text-decoration:underline; text-underline-offset:3px">Volver arriba</a>
</footer>
<script>
    // === CONFIGURA TU CAT√ÅLOGO AQU√ç ‚Äî TIERS PERSONALIZADOS ===
    const CATALOG = {
      anomalia: [{
        id: "an-1",
        icon: "üíé",
        name: "Anomal√≠a",
        priceCLP: 10000,
        priceUSD: 10,
        perks: [
          "Veh√≠culos de Concesionario (x2)",
          "Veh√≠culo de Cat√°logo (x2)",
          "Tickets de Tuning x3 (50% desct.)",
          "Dinero: $168.000",
          "Propiedad b√°sica (casa barrio bajo)",
          "Acceso a Cat√°logo Distorsi√≥n VIP",
          "Rango exclusivo en Discord",
          "Acceso a chat exclusivo de donadores"
        ]
      }],
      eternidad: [{
        id: "et-1",
        icon: "üí†",
        name: "Eternidad",
        priceCLP: 15000,
        priceUSD: 15,
        perks: [
          "Veh√≠culos de Concesionario (x3)",
          "Veh√≠culo de Cat√°logo (x3)",
          "Tickets de Tuning x3 (50% desc.)",
          "Dinero inicial: $200.000",
          "Placa de auto personalizada (x1)",
          "Rango exclusivo en Discord",
          "Propiedad b√°sica (Vivienda en el sector Urbano)",
          "Acceso a Cat√°logo Distorsi√≥n VIP",
          "Acceso limitado a mini eventos VIP (sorteos peque√±os o misiones exclusivas)",
          "Acceso a autorroles y solicitud de rangos personalizados en Discord",
          "Acceso a chat exclusivo de donadores"
        ]
      }],
      resonancia: [{
        id: "re-1",
        icon: "üí†",
        name: "Resonancia",
        priceCLP: 25000,
        priceUSD: 25,
        perks: [
          "Veh√≠culos de Concesionario (x2)",
          "Veh√≠culos de Cat√°logo (x2)",
          "Tickets de Tuning x3 (50% desc.)",
          "Dinero inicial: $250.000",
          "Placa de auto personalizada (x1)",
          "Propiedad b√°sica (departamento o casa peque√±a)",
          "Rango exclusivo en Discord y chat",
          "Acceso a Cat√°logo Distorsi√≥n VIP",
          "Acceso a autorroles y solicitud de rangos personalizados en Discord",
          "Acceso a chat exclusivo de donadores"
        ]
      }],
      luminencia: [{
        id: "lu-1",
        icon: "üîπ",
        name: "Luminencia",
        priceCLP: 35000,
        priceUSD: 35,
        perks: [
          "Veh√≠culos de Concesionario (x3) ‚Üí un auto extra sobre Resonancia",
          "Veh√≠culos de Cat√°logo (x2)",
          "Veh√≠culo Marino o A√©reo (x1 ‚Äì lancha o helic√≥ptero b√°sico)",
          "Tickets de Tuning x4 (50% desc.)",
          "Tickets de Tuning x2 (100% desc.)",
          "Dinero inicial: $250.000",
          "Placa de auto personalizada (x1)",
          "Rango exclusivo con color en chat y Discord",
          "Propiedad b√°sica (departamento o casa chica)",
          "Acceso a Cat√°logo Distorsi√≥n VIP",
          "Acceso a mini eventos VIP m√°s elaborados (carreras privadas, sorteos de veh√≠culos)",
          "Acceso a autorroles y solicitud de rangos personalizados en Discord",
          "Acceso a chat exclusivo de donadores"
        ]
      }],
      chaos: [{
        id: "ch-1",
        icon: "üí∑",
        name: "Chaos",
        priceCLP: 50000,
        priceUSD: 50,
        perks: [
          "Veh√≠culos de Concesionario (x3)",
          "Veh√≠culos de Cat√°logo (x3)",
          "Veh√≠culo Marino o A√©reo (x1 ‚Äì b√°sico: lancha o ultraligero)",
          "Tickets de Tuning x4 (50% desct.)",
          "Tickets de Tuning x2 (100% desct.)",
          "Dinero: $350.000",
          "Placas de auto personalizadas (x2)",
          "Propiedad en zona media/alta (reemplazable por una del cat√°logo x15 d√≠as)",
          "Acceso a Cat√°logo Distorsi√≥n VIP",
          "Invitaci√≥n a eventos VIP menores (carreras, sorteos, torneos)",
          "Acceso a autorroles y solicitud de rangos personalizados en Discord",
          "Acceso a chat exclusivo de donadores"
        ]
      }],
      paradox: [{
        id: "pa-1",
        icon: "üëë",
        name: "Paradox",
        priceCLP: 100000,
        priceUSD: 100,
        perks: [
          "Seguro CK (Recuperaci√≥n de 1 propiedad y 1 veh√≠culo VIP por CK propio, v√°lido solo por un CK propio)",
          "Veh√≠culos de Concesionario (x5)",
          "Veh√≠culos de Cat√°logo  (x3)",
          "Veh√≠culo Marino o A√©reo (x1 ‚Äì helic√≥ptero/lancha/jet privado seg√∫n elecci√≥n)",
          "Veh√≠culo Exclusivo √önico (con matr√≠cula o skin personalizada del jugador)",
          "Tickets de Tuning x5 (50% desct.)",
          "Tickets de Tuning x3 (100% desct.)",
          "Dinero: $500.000",
          "Placas de auto personalizadas x3 (ej: DISTORSION_01)",
          "Rango exclusivo con color especial en chat y Discord",
          "Propiedad de Lujo (Mansi√≥n en Barrio Alto con opci√≥n a reemplazar por casa mapeada exclusiva del cat√°logo x1 mes sin costo adicional)",
          "Acceso a Cat√°logo Distorsi√≥n VIP",
          "Eventos exclusivos VIP (carreras clandestinas, subastas privadas, fiestas en mansiones, torneos de rol de lujo)",
          "Acceso a autorroles y solicitud de rangos personalizados en Discord",
          "Acceso a chat exclusivo de donadores"
        ]
      }]
    };

    const CATEGORIES = [
      { key: "anomalia",    title: "Anomal√≠a",   icon: "üíé",  color: getComputedStyle(document.documentElement).getPropertyValue('--anomalia').trim() || '#7dd3fc' },
      { key: "eternidad",   title: "Eternidad",  icon: "üí†",  color: getComputedStyle(document.documentElement).getPropertyValue('--eternidad').trim() || '#93c5fd' },
      { key: "resonancia",  title: "Resonancia", icon: "üí†",  color: getComputedStyle(document.documentElement).getPropertyValue('--resonancia').trim() || '#c4b5fd' },
      { key: "luminencia",  title: "Luminencia", icon: "üîπ",  color: getComputedStyle(document.documentElement).getPropertyValue('--luminencia').trim() || '#67e8f9' },
      { key: "chaos",       title: "Chaos",      icon: "üí∑",  color: getComputedStyle(document.documentElement).getPropertyValue('--chaos').trim() || '#fca5a5' },
      { key: "paradox",     title: "Paradox",    icon: "üëë",  color: getComputedStyle(document.documentElement).getPropertyValue('--paradox').trim() || '#fde68a' },
    ];

    const formatCLP = (n) => new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', maximumFractionDigits: 0 }).format(n);
    const formatUSD = (n) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(n);

    function renderCatalog(){
      const root = document.getElementById("catalog");
      root.innerHTML = "";
      CATEGORIES.forEach(cat => {
        const section = document.createElement("section");
        section.className = "category";
        section.id = cat.key;

        const header = document.createElement("div");
        header.className = "cat-header";
        header.innerHTML = `
          <span class="dot" style="background:${cat.color}"></span>
          <div>
            <div style="font-weight:900;font-size:20px">${cat.icon} ${cat.title}</div>
            <div class="muted">Beneficios ${cat.title.toLowerCase()} para mejorar tu experiencia de rol.</div>
          </div>
        `;
        section.appendChild(header);

        const grid = document.createElement("div");
        grid.className = "grid";

        (CATALOG[cat.key] || []).forEach(item => {
          const card = document.createElement("article");
          card.className = "card";
          const perks = (item.perks || []).map(p => `
            <li><span class="perk-dot" style="background:${cat.color}"></span><span>${p}</span></li>
          `).join("");
          card.innerHTML = `
            <div class="row" style="align-items:flex-start">
              <h3>${item.icon} ${item.name}</h3>
              <span class="badge">${cat.title}</span>
            </div>
            <ul class="perks">${perks}</ul>
            <div class="card-footer">
              <span class="price">${formatCLP(item.priceCLP)} / $${item.priceUSD} USD</span>
              <a class="btn" href="#comprar" aria-label="Comprar ${item.name}" onclick="addToCart({id: item.id, name: item.name, icon: item.icon, priceCLP: item.priceCLP, priceUSD: item.priceUSD, category: cat.title})">Agregar</a>
            </div>
          `;
          grid.appendChild(card);
        });

        section.appendChild(grid);
        root.appendChild(section);
      });
    }

    document.getElementById('year').textContent = new Date().getFullYear();
    renderCatalog();
    
// === CARRITO LOGIC ===
const CART_KEY = "distorsionrp_cart_v1";
let cart = JSON.parse(localStorage.getItem(CART_KEY) || "[]");

function saveCart(){
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
}

function addToCart(item){
  const existing = cart.find(i => i.id === item.id);
  if (existing){ existing.qty += 1; }
  else { cart.push({...item, qty:1}); }
  saveCart();
  renderCart();
}

function removeFromCart(id){
  cart = cart.filter(i => i.id !== id);
  saveCart();
  renderCart();
}

function formatCLP2(n){ return new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', maximumFractionDigits: 0 }).format(n); }
function formatUSD2(n){ return `$${n} USD`; }

function renderCart(){
  const itemsRoot = document.getElementById('cart-items');
  const totalCLP = cart.reduce((acc,i)=> acc + (i.priceCLP * i.qty), 0);
  const totalUSD = cart.reduce((acc,i)=> acc + (i.priceUSD * i.qty), 0);
  document.getElementById('cart-total-clp').textContent = formatCLP2(totalCLP);
  document.getElementById('cart-total-usd').textContent = formatUSD2(totalUSD);
  document.getElementById('cart-count').textContent = cart.reduce((acc,i)=> acc + i.qty, 0);
  itemsRoot.innerHTML = cart.map(i => `
    <div class="cart-item">
      <div style="font-size:20px">${i.icon || "üõí"}</div>
      <div style="flex:1">
        <h4>${i.name}</h4>
        <div class="meta">${i.category || ""}</div>
        <div class="meta">Precio: ${formatCLP2(i.priceCLP)} / $${i.priceUSD} USD ‚Äî Cantidad: ${i.qty}</div>
      </div>
      <button class="cart-close" onclick="removeFromCart('${i.id}')">X</button>
    </div>
  `).join('');
}

// Drawer controls
const drawerEl = document.getElementById('cart-drawer');
document.getElementById('open-cart').addEventListener('click', (e)=>{ e.preventDefault(); drawerEl.classList.add('open'); });
document.getElementById('close-cart').addEventListener('click', ()=> drawerEl.classList.remove('open'));
renderCart();
</script><script>
(function(){
  const root = document.getElementById('catalog');
  // Si ya se renderiz√≥, agrega clase 'cardlike' a cada secci√≥n
  function tagSections(){
    root?.querySelectorAll('section.category').forEach(s => s.classList.add('cardlike'));
  }
  // Llama ahora y tambi√©n intercepta renderCatalog si existe
  tagSections();
  if (typeof renderCatalog === 'function'){
    const _old = renderCatalog;
    window.renderCatalog = function(){
      _old();
      tagSections();
    };
  }
})();
</script>
<div aria-label="Carrito de compras" aria-modal="true" class="cart-drawer" id="cart-drawer" role="dialog">
<div class="cart-header">
<div class="cart-title">Tu carrito</div>
<button class="cart-close" id="close-cart">Cerrar</button>
</div>
<div class="cart-body" id="cart-items"></div>
<div class="cart-footer">
<div class="cart-total"><span>Total</span><span id="cart-total-clp">$0</span></div>
<div class="cart-total" style="margin-top:4px"><span>Total USD</span><span id="cart-total-usd">$0 USD</span></div>
<a class="btn-primary" href="#checkout" id="checkout-btn">Proceder al pago</a>
</div>
</div>
</body>
</html>
